# Stripe 测试账号与卡号大全 (仅限测试模式)

> **⚠️ 注意**：这些卡号仅在 Stripe 后台开启 **"Test Mode" (测试模式)** 时有效。请勿在生产环境使用。

## 1. 通用配置信息

除卡号外，其他字段通常可以使用任意有效格式，但在开发时建议使用以下默认值以减少验证阻力。

| 字段 | 建议值 | 说明 |
| :--- | :--- | :--- |
| **到期日期 (MM/YY)** | `12/34` | 任何 **未来** 的日期均可 |
| **CVC / CVV** | `123` | 任意 3 位数字 (Amex 为 4 位) |
| **邮编 (ZIP / Postal)** | `10001` | 任意有效格式邮编 |
| **国家 (Country)** | `US` | 美国 (通常不容易触发额外验证) |

## 2. 支付成功卡号 (总是成功)

使用这些卡号会立即通过验证，并触发 `payment_intent.succeeded` 或 `invoice.payment_succeeded` 事件。

| 品牌 | 卡号 | 用途 |
| :--- | :--- | :--- |
| **Visa** (最推荐) | `4242 4242 4242 4242` | 标准开发测试 |
| **Mastercard** | `5555 5555 5555 4444` | 测试不同卡组织的识别 |
| **American Express** | `3782 822463 10005` | 测试 15 位卡号 & 4 位 CVC |
| **Discover** | `6011 1111 1111 1117` | |
| **Diners Club** | `3600 000000 0007` | |
| **JCB** | `3528 0000 0000 0008` | 亚洲市场常用 |
| **UnionPay (银联)** | `6200 0000 0000 0000` | 测试银联支付 (需在 Stripe 后台开启) |

## 3. 支付失败卡号 (总是拒绝)

使用这些卡号来测试你的前端错误提示 (UI Error Handling) 和后端 Webhook 的失败处理逻辑。

| 错误类型 | 卡号 | 错误代码 (Code) | 描述 |
| :--- | :--- | :--- | :--- |
| **一般拒绝** | `4000 0000 0000 0002` | `card_declined` | 银行拒绝了该交易 (最常见) |
| **余额不足** | `4000 0000 0000 0099` | `insufficient_funds` | 卡内资金不足 |
| **卡片遗失** | `4000 0000 0000 0041` | `lost_card` | 卡片已挂失 |
| **卡片被窃** | `4000 0000 0000 0043` | `stolen_card` | 卡片被盗刷 |
| **卡片过期** | `4000 0000 0000 0051` | `expired_card` | 卡片已过有效期 |
| **CVC 错误** | `4000 0000 0000 0125` | `incorrect_cvc` | 安全码输入错误 |
| **处理错误** | `4000 0000 0000 0019` | `processing_error` | 银行系统故障 (通常用于测试重试机制) |

## 4. 3D Secure 验证卡号 (弹窗验证)

这些卡号会模拟 "Verified by Visa" 或 "Mastercard Identity Check" 的弹窗验证流程（SCA）。

| 场景 | 卡号 | 行为 |
| :--- | :--- | :--- |
| **3DS 验证通过** | `4000 0000 0000 3063` | 弹出验证窗口 -> 点击 **"Authorize"** -> **支付成功** |
| **3DS 验证失败** | `4000 0000 0000 3030` | 弹出验证窗口 -> 点击 **"Fail"** -> **支付失败** |

## 5. 常用 CLI 命令备忘

记得将 Webhook 事件转发到本地环境，否则无法收到上述卡号的支付结果通知。

```bash
# 将事件转发到 localhost:3000
stripe listen --forward-to localhost:3000/api/stripe/webhook

# 手动触发一个特定事件 (无需走 UI 流程)
stripe trigger payment_intent.succeeded

```
